from typing import List
import gpio

PWR_PINS: List[int] = [0,  2,  14, 16, 18, 22, 24, 26]
DIR_PINS: List[int] = [36, 1,  11, 15, 17, 19, 21, 25]
FLT_PINS: List[int] = [37, 38, 39, 40, 41, 42, 43, 29]

UP = True
DOWN = False

def _bounds_check(index):
    """Raises an error if index is not within bounds"""
    if index > 8 and index < 0:
        raise IndexError(index)


def _set_value(motor: int, power: None | bool, direction: None | bool):
    """Sets a motors state"""
    if not direction is None:
        _set_direction(motor, direction)
    
    if not power is None:
        _set_power(motor, power)
    
def set_value(motor: int, power: None | bool, direction: None | bool):
    """Sets a motors state"""
    _bounds_check(motor)
    _set_value(motor, direction)


def _get_direction(motor: int) -> bool:
    return gpio.get_val(DIR_PINS[motor])
    
def get_direction(motor: int) -> bool:
    _bounds_check(motor)
    return _get_direction(motor)


def _set_direction(motor: int, direction: bool):
    """Sets a motor in a specific direction without bounds checking"""
    if direction:
        _up(motor)
    else:
        _down(motor)

def set_direction(motor: int, direction: bool):
    """Sets a motor in a specific direction"""
    _bounds_check(motor)
    _set_direction(motor, direction)


def _up(motor: int):
    """Sets a motor to run up without bounds check"""
    gpio.off(DIR_PINS[motor])

def up(motor: int):
    """Sets a motor to run up"""
    _bounds_check(motor)
    _up(motor)


def _down(motor: int):
    """Sets a motor to run down without bounds check"""
    gpio.on(DIR_PINS[motor])

def down(motor: int):
    """Sets a motor to run down"""
    _bounds_check(motor)
    _down(motor)

def _get_power(motor: int) -> bool:
    return gpio.get_val(PWR_PINS[motor])

def get_power(motor: int) -> bool:
    _bounds_check(motor)
    return _get_power(motor)

def _set_power(motor: int, power: bool):
    """Turns a motor on or off without bounds check"""
    if power:
        _on(motor)
    else:
        _off(motor)

def set_power(motor: int, power: bool):
    """Turns a motor on or off"""
    _bounds_check(motor)
    _set_power(motor, power)


def _on(motor: int):
    """Turns a motor on without bounds check"""
    gpio.on(PWR_PINS[motor])

def on(motor: int):
    """Turns a motor on"""
    _bounds_check(motor)
    _on(motor)


def _off(motor: int):
    """Turns a motor off without bounds check"""
    gpio.off(PWR_PINS[motor])

def off(motor: int):
    """Turns a motor off"""
    _bounds_check(motor)
    _off(motor)